<tal:block tal:define="main_template view/main_template;
                       is_failsafe python:main_template == '@@failsafe_main_template'">
<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en-US" lang="en-US"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/?main_template/macros/master"
      tal:define="dummy python:request.set('disable_border',1)"
      i18n:domain="plone">

<head>

<tal:javascript metal:fill-slot="javascript_head_slot">
  <tal:failsafe_js tal:condition="is_failsafe">
    <script type="text/javascript" tal:attributes="src string:${portal_url}/jquery.js"></script>
    <script type="text/javascript">var jq = jQuery;</script>
    <script type="text/javascript" tal:attributes="src string:${portal_url}/++resource++plone.app.jquerytools.js"></script>
    <script type="text/javascript" tal:attributes="src string:${portal_url}/++resource++plone.app.jquerytools.overlayhelpers.js"></script>
  </tal:failsafe_js>
  <script type="text/javascript" src="++resource++plone.app.skineditor.js"></script>
</tal:javascript>

<tal:css metal:fill-slot="style_slot">
  
  <link tal:condition="is_failsafe"
        rel="stylesheet" type="text/css" media="screen" tal:attributes="href string:${portal_url}/public.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="++resource++plone.app.skineditor.css" />
  
</tal:css>
</head>

<body>
  <tal:block metal:fill-slot="main">
    <tal:block metal:define-macro="main">
    <div tal:omit-tag="not:is_failsafe" id="content">
      <h1 class="documentFirstHeading">Skin Resource Editor</h1>
    
      <dl tal:condition="is_failsafe" class="portalMessage">
        Oops, something broke!
      </dl>
    
      <form action="@@plone.app.skineditor.browse" method="GET" id="plone-app-skineditor-filter-form">
        <input id="plone-app-skineditor-name-field" type="text" name="name"
               tal:attributes="value request/form/name|nothing"/>
        <input id="plone-app-skineditor-filter-button" type="submit" value="Filter" class="allowMultiSubmit"/>
        <input type="checkbox" id="plone-app-skineditor-customized-checkbox" tal:attributes="checked python:'customized' in request.form and 'checked' or None" name="customized" value="1"/> Customized resources only
      </form>
    
      <dl id="plone-app-skineditor-browser">
        <p class="plone-app-skineditor-result-count" tal:condition="request/form/name|nothing">
          Displaying <strong tal:content="python:len(view.results())"/>
          results for "<strong tal:content="request/form/name|nothing"/>"
        </p>
        <tal:block tal:repeat="resource python:view.results(customized=request.form.get('customized', None))">
          <a class="plone-app-skineditor-resource"
             tal:define="first_resource python:resource[0]"
             tal:attributes="href string:@@plone.app.skineditor.layers?name=${first_resource/name};
                             id string:skineditor-${first_resource/name}">
            <dt>
              <img tal:condition="first_resource/icon" tal:attributes="src first_resource/icon" />
              <tal:block tal:content="first_resource/name"/>
              <p class="description"
                 tal:content="string:(${first_resource/description})"
                 tal:condition="first_resource/description"/>
            </dt>
          </a>
        </tal:block>
      </dl>
    </div>

  </tal:block>
</tal:block>
    
</body>
</html>
</tal:block>